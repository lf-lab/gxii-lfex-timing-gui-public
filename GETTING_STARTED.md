# 🚀 GXII-LFEX Timing Analysis GUI - スタートガイド v1.7.0

**初めての方向け完全ガイド** - tarballの解凍からアプリケーションの起動、基本的な使い方までを解説します。

---

## 📋 対象環境

-   **macOS**
-   **Linux**

Windows環境をお使いの方は、`GETTING_STARTED_WINDOWS.md` を参照してください。

---

## 📦 STEP 1: ファイルの準備

### 1.1. ダウンロードしたファイルの確認

まず、ダウンロードしたtarballファイルを確認します。

```bash
ls -l LFEXTiming-1.7.0.tar.gz
```

### 1.2. 作業ディレクトリへの移動と解凍

ファイルを任意の作業ディレクトリに移動し、解凍します。

```bash
# 例: ホームディレクトリに専用フォルダを作成する場合
mkdir -p ~/lfex_work
mv LFEXTiming-1.7.0.tar.gz ~/lfex_work
cd ~/lfex_work
tar -xzf LFEXTiming-1.7.0.tar.gz
```

解凍後、`LFEXTiming-1.7.0` というディレクトリが作成されます。

```bash
cd LFEXTiming-1.7.0
```

---

## 🔧 STEP 2: セットアップ

### 2.1. 起動スクリプトの実行

以下のコマンドでアプリケーションを起動します。初回起動時には、必要なPython環境（仮想環境）の構築とパッケージのインストールが自動的に行われます。

```bash
./start_app.sh
```

**期待される動作**:
1.  `venv` という名前の仮想環境が作成されます。
2.  `requirements.txt` に基づいて必要なライブラリがインストールされます。
3.  Streamlitサーバーが起動します。
4.  自動的にWebブラウザでアプリケーションが開きます。

### 2.2. 起動の確認

ターミナルに以下のようなメッセージが表示され、ブラウザでGUIが確認できれば成功です。

```
✅ LFEXTiming GUIを起動しています...
✅ 仮想環境をアクティベートしました: venv
✅ Streamlitサーバーを起動中...

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8502
  Network URL: http://xxx.xxx.x.x:8502
```

ブラウザが自動で開かない場合は、表示された `Local URL` (`http://localhost:8502`) を手動で開いてください。

---

## 🎯 STEP 3: 基本的な使い方

### 3.1. データファイルの準備

このアプリケーションで解析するためのデータファイル（`.txt` または `.img` 形式）を準備してください。

**注記**: サンプルデータは配布用のtarballには含まれていません。ご自身の実験データを使用するか、別途提供されているサンプルデータをご利用ください。

### 3.2. 解析の実行

1.  **ファイルアップロード**:
    -   左サイドバーの「📁 ファイル選択」から、準備したデータファイルをアップロードします。
2.  **プレビューと領域設定**:
    -   「データプレビュー」タブで、読み込んだデータが画像として表示されます。
    -   サイドバーの「GXII領域設定」「LFEX領域設定」スライダーを調整し、解析対象の領域を矩形で指定します。
3.  **解析実行**:
    -   「解析実行」タブに移動し、「🚀 解析実行」ボタンをクリックします。
4.  **結果確認**:
    -   「結果表示」タブで、解析結果のグラフや数値（ピーク位置、タイミング差など）を確認できます。
    -   「エクスポート」タブから、結果をCSVファイルとして保存したり、設定をJSONファイルとして書き出したりできます。

---

## ⚙️ STEP 4: アプリケーションの管理

### 4.1. 2回目以降の起動

一度セットアップが完了すれば、次回からは同じコマンドで素早く起動できます。

```bash
cd ~/lfex_work/LFEXTiming-1.7.0  # プロジェクトディレクトリに移動
./start_app.sh
```

### 4.2. アプリケーションの停止

-   起動したターミナルで `Ctrl + C` を押すと、Streamlitサーバーが停止します。

### 4.3. プロセスのクリーンアップ

稀に、アプリケーションを正常に終了してもバックグラウンドでプロセスが残ってしまうことがあります。その場合は、クリーンアップスクリプトを実行してください。

```bash
./cleanup_processes.sh
```

これにより、関連するプロセスが強制的に終了され、ポートの競合などを解消できます。

---

## 🆘 トラブルシューティング

### 問題: "Permission denied" エラー

**原因**: 起動スクリプトに実行権限が付与されていません。
**解決策**: 以下のコマンドで実行権限を付与してください。

```bash
chmod +x start_app.sh cleanup_processes.sh
```

### 問題: Pythonのバージョンエラー

**原因**: システムにインストールされているPythonのバージョンが古い、または互換性がありません。
**解決策**: このアプリケーションはPython 3.8以上を推奨しています。`python3 --version` でバージョンを確認し、必要であれば新しいバージョンをインストールしてください。

### 問題: ポートが既に使用されている (Address already in use)

**原因**: 他のアプリケーションが同じポート（デフォルト: 8502）を使用しているか、以前のプロセスが正常に終了していません。
**解決策**: 上記の `./cleanup_processes.sh` を実行してから、再度起動してください。

---

## 🎉 これで準備完了です！

お疲れ様でした。これでGXII-LFEX Timing Analysis GUIを使用する準備が整いました。

**楽しい解析作業を！** 🚀